(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"24c3":function(e,t,r){},3530:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"top-background"}),r("div",{staticClass:"margin-20"},[e._m(0),r("div",{staticClass:"d-flex pt-5 flex-wrap body"},e._l(e.returnNumbers,function(t,s){return r("div",{key:s,staticClass:"p-2"},[r("div",{class:"card-number "+(t.reserved?"reserved":""),on:{click:function(t){return e.openDialog(s+1)}}},[r("span",[e._v(e._s(t.number))]),t.reserved?r("small",{staticClass:"d-block ml-2"},[e._v(e._s(t.user.split(" ")[0]))]):e._e()])])}),0)]),r("el-dialog",{attrs:{title:"Reservar número "+e.openedNumer,visible:e.dialogVisible,width:e.returnModalWidth},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"form-row"},[r("div",{staticClass:"col-12"},[r("label",{attrs:{for:""}},[e._v("Nome Completo")]),r("el-input",{attrs:{placeholder:"Insira seu nome"},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}})],1),r("div",{staticClass:"col-12 mt-3"},[r("label",{attrs:{for:""}},[e._v("Telefone")]),r("el-input",{directives:[{name:"mask",rawName:"v-mask",value:["(##) ####-####","(##) #####-####"],expression:"['(##) ####-####', '(##) #####-####']"}],attrs:{placeholder:"Insira seu telefone"},model:{value:e.form.celular,callback:function(t){e.$set(e.form,"celular",t)},expression:"form.celular"}})],1),r("div",{staticClass:"col-12 mt-3"},[r("label",{attrs:{for:""}},[e._v("E-mail")]),r("el-input",{attrs:{placeholder:"Insira seu E-mail"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("div",{staticClass:"col-12 mt-3"},[r("label",{attrs:{for:""}},[e._v("Números Adicionais\n          "),r("small",{staticClass:"d-block"},[e._v("(opcional deixe vazio caso seja apenas um)")])]),r("el-select",{staticClass:"w-100",attrs:{multiple:"",placeholder:"Selecione"},model:{value:e.form.numbers,callback:function(t){e.$set(e.form,"numbers",t)},expression:"form.numbers"}},e._l(e.returnNumbers,function(t,s){return t.reserved?e._e():r("el-option",{key:s,attrs:{label:t.number,value:t.number}})}),1)],1),r("div",{staticClass:"col-12 mt-3"},[r("label",{attrs:{for:""}},[e._v("Upload do comprovante (R$ 20,00 por número)")]),r("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingUpload,expression:"loadingUpload"}],staticClass:"upload-demo",attrs:{action:"","on-change":e.fileInput,"file-list":e.fileList,"auto-upload":!1,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Clique para fazer o upload")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n            aceito arquivos jpg/png\n          ")])],1)],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancelar")]),r("el-button",{attrs:{disabled:e.returnDisabled,type:"primary"},on:{click:function(t){return e.finishPayment()}}},[e._v("Confirmar")])],1)])],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center w-100"},[r("label",{staticClass:"label-style",staticStyle:{color:"white"},attrs:{for:""}},[e._v("Selecione o número desejado, caso queira mais de um terá a opção\n        acessando um deles")])])}],n=(r("7f7f"),r("96cf"),r("3b8d")),o=(r("7514"),r("ac6a"),r("ac34")),i={name:"principal",data:function(){return{loadingUpload:!1,reservedNumbers:[],uploaded:!1,fileList:[],dialogVisible:!1,form:{user:"",celular:"",email:"",numbers:[],url:"",status:"reserved"},openedNumer:"",unsubscribe:""}},mounted:function(){var e=this;console.log("dasd"),this.unsubscribe=o["b"].onSnapshot(function(t){t.docChanges().forEach(function(t){var r=t.doc.data();r.numbers.map(function(t){e.reservedNumbers.find(function(e){return e===t})||e.reservedNumbers.push({number:t,user:r.user})})})}),this.loadingTimer()},computed:{returnModalWidth:function(){return console.log(document.body.clientWidth),document.body.clientWidth>600?"40%":"80%"},returnNumbers:function(){var e,t=[];for(e=1;e<=150;e++){var r=this.reservedNumbers.find(function(t){return t.number===e});r?t.push({number:e,user:r.user,reserved:!0}):t.push({number:e,user:"",reserved:!1})}return t},returnDisabled:function(){return""==this.form.user||""==this.form.celular||""==this.form.email||this.form.numbers==[]||!this.uploaded}},methods:{finishPayment:function(){var e=this;o["b"].doc().set(this.form).then(function(){e.dialogVisible=!1,e.uploaded=!1,e.form={user:"",celular:"",email:"",numbers:[],url:"",status:"reserved"},e.fileList=[],e.$message({message:"Obrigado pela contribuição e boa sorte!!",type:"success"})})},openDialog:function(e){this.form.numbers=[e],this.openedNumer=e,this.dialogVisible=!0},fileInput:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,s,a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{t&&t.name&&(this.processing=!0,r=t.url,s=new FormData,s.append("image",t),a="comprovantes/".concat(Date.now(),"-").concat(t.name),n={contentType:t.type},i=this,i.loadingUpload=!0,fetch(r).then(function(e){return e.blob()}).then(function(e){return o["a"].ref().child(a).put(e,n).then(function(){i.uploaded=!0,i.loadingUpload=!1,o["a"].ref().child(a).getDownloadURL().then(function(e){i.form.url=e})})}))}finally{this.processing=!1}case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),loadingTimer:function(){var e=this;this.$store.commit("SET_LOADING_STATUS",!0),setTimeout(function(){e.$store.commit("SET_LOADING_STATUS",!1),e.show=!0},2e3)}}},l=i,u=(r("4a9a"),r("2877")),c=Object(u["a"])(l,s,a,!1,null,null,null);t["default"]=c.exports},"4a9a":function(e,t,r){"use strict";var s=r("24c3"),a=r.n(s);a.a}}]);
//# sourceMappingURL=admin.cdc3c8ff.js.map